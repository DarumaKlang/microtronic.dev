# üí° ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏•‡∏π‡∏ä‡∏±‡∏ô

‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô 3 ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏Å ‡πÜ:

1.  **‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î Type (TypeScript):** ‡∏™‡∏£‡πâ‡∏≤‡∏á Type ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
2.  **Component ‡∏´‡∏•‡∏±‡∏Å (`FinancialTracker.tsx`):** Component ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô **Server Component** ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:
      * ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô (‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏î ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ API key ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ)
      * ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (THB/USD, USD/USDT, ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÑ‡∏ó‡∏¢, Bitcoin)
      * ‡πÅ‡∏™‡∏î‡∏á Widget ‡∏à‡∏≤‡∏Å TradingView ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö **‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÇ‡∏•‡∏Å** ‡πÅ‡∏•‡∏∞ **‡∏´‡∏∏‡πâ‡∏ô‡∏£‡∏≤‡∏¢ Sector**
3.  **Component ‡∏¢‡πà‡∏≠‡∏¢ (`TradingViewWidget.tsx`):** Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ù‡∏±‡∏á TradingView Widget ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ `use client` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡πÑ‡∏î‡πâ

-----

## 1\. ‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î Type (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `src/types/financial.ts` (‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÉ‡∏î‡∏Å‡πá‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡πá‡∏ö Type)

```typescript
// src/types/financial.ts

export interface ExchangeRateData {
    symbol: string; // ‡πÄ‡∏ä‡πà‡∏ô 'USD/THB'
    rate: number;
    change: number; // ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
    isUp: boolean; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏î‡∏•‡∏á
}

export interface SectorPerformance {
    sector: string;
    performance: string; // ‡πÄ‡∏ä‡πà‡∏ô '+1.25%'
}

export interface FinancialTrackerData {
    thbUsd: ExchangeRateData;
    usdUsdt: ExchangeRateData;
    goldThb: ExchangeRateData;
    bitcoinUsd: ExchangeRateData;
    sectorPerformance: SectorPerformance[];
}
```

-----

## 2\. Component ‡∏¢‡πà‡∏≠‡∏¢: TradingView Widget

‡πÄ‡∏£‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Client Component ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ù‡∏±‡∏á Widget ‡∏Ç‡∏≠‡∏á TradingView

**‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå:** `src/components/TradingViewWidget.tsx`

```tsx
// src/components/TradingViewWidget.tsx
"use client";

import React, { useEffect, useRef, memo } from 'react';

// ‡∏Å‡∏≥‡∏´‡∏ô‡∏î type ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö props
interface TradingViewWidgetProps {
    // ‡∏Ç‡∏¢‡∏≤‡∏¢ type ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 'sector-performance' ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
    symbol: string;
    widgetType: 'widget' | 'chart' | 'sector-performance'; 
    title: string;
    height: number;
    description: string;
}

// ‡πÉ‡∏ä‡πâ memo ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û
const TradingViewWidget: React.FC<TradingViewWidgetProps> = memo(({ symbol, widgetType, title, height, description }) => {
    const container = useRef<HTMLDivElement>(null);

    useEffect(() => {
        // ID ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Widget ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß
        const widgetId = `tradingview-widget-${symbol.replace(/[^a-zA-Z0-9]/g, '-')}-${widgetType}`;
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ element ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ widget ‡∏ñ‡∏π‡∏Å‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
        if (container.current && !container.current.querySelector(`#${widgetId}`)) {
            
            // ‡∏•‡πâ‡∏≤‡∏á container ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏° widget ‡πÉ‡∏´‡∏°‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ã‡πâ‡∏≥
            container.current.innerHTML = '';

            const script = document.createElement("script");
            script.type = "text/javascript";
            script.async = true;

            let widgetConfig = {};

            if (widgetType === 'chart') {
                // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Chart Widget (‡πÄ‡∏ä‡πà‡∏ô XAUUSD)
                script.src = "https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js";
                widgetConfig = {
                    "autosize": true,
                    "symbol": symbol,
                    "interval": "D",
                    "timezone": "Asia/Bangkok",
                    "theme": "dark", // ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡πÇ‡∏ó‡∏ô‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå
                    "style": "1",
                    "locale": "en",
                    "enable_publishing": false,
                    "allow_symbol_change": true,
                    "support_host": "https://www.tradingview.com"
                };
            } else if (widgetType === 'sector-performance') {
                // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Sector Performance Hotlists Widget
                script.src = "https://s3.tradingview.com/external-embedding/embed-widget-hotlists.js";
                widgetConfig = {
                    "colorTheme": "dark",
                    "dateRange": "12M",
                    "exchange": "NASDAQ",
                    "showChart": true,
                    "locale": "en",
                    "width": "100%",
                    "height": height, // ‡πÉ‡∏ä‡πâ height ‡πÄ‡∏ï‡πá‡∏°
                    "dataSource": "Performance", 
                    "noSnap": true,
                    "market": "america",
                    "tabs": [
                        {
                            "title": "Sector Performance",
                            "data": "sector",
                            "column": "sector",
                            "sortby": "market_cap",
                            "order": "desc",
                            "source": "america",
                            "wrap": true
                        }
                    ],
                    "isLanding": false
                };
            } else if (widgetType === 'widget') {
                // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Ticker ‡∏´‡∏£‡∏∑‡∏≠ Widget ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)
                script.src = "https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js";
                widgetConfig = {
                    "symbols": [
                        { "proName": symbol, "title": title }
                    ],
                    "showSymbolLogo": true,
                    "is41_0_0": false,
                    "locale": "en",
                    "colorTheme": "dark"
                }
            }
            
            const configAttribute = JSON.stringify(widgetConfig);

            const div = document.createElement('div');
            div.className = 'tradingview-widget-container__widget';
            div.id = widgetId; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î ID ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö container ‡∏Ç‡∏≠‡∏á widget
            
            // ‡πÉ‡∏ä‡πâ innerHTML ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤ config
            script.innerHTML = configAttribute;

            container.current.appendChild(div);
            container.current.appendChild(script);
        }
    }, [symbol, widgetType, height]); // dependency array

    // ‡πÉ‡∏ä‡πâ Tailwind Arbitrary Value ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÅ‡∏ö‡∏ö Dynamic
    const dynamicHeightClass = `h-[${height}px]`;

    return (
        <div className="flex flex-col h-full">
            <h4 className="text-xl font-semibold mb-2">{title}</h4>
            <p className="text-sm opacity-75 mb-4">{description}</p>
            {/* TradingView Widget Container */}
            <div className={`flex-grow rounded-xl overflow-hidden shadow-2xl backdrop-blur-sm min-h-[200px] ${dynamicHeightClass}`}
                 ref={container}
            >
                {/* Widget ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà */}
                <div className="tradingview-widget-container__widget"></div>
            </div>
        </div>
    );
});

TradingViewWidget.displayName = 'TradingViewWidget';

export default TradingViewWidget;
```

-----

## 3\. Component ‡∏´‡∏•‡∏±‡∏Å: FinancialTracker

‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ß‡∏≤‡∏á‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Tailwind CSS

**‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå:** `src/components/FinancialTracker.tsx`

```tsx
// src/components/FinancialTracker.tsx
import React from 'react';
import Link from 'next/link';
import GooeyBackground from '@/components/GooeyBackground'; // ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ component ‡∏ô‡∏µ‡πâ
import GlassmorphismCard from '@/components/GlassmorphismCard'; // ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ component ‡∏ô‡∏µ‡πâ
import TradingViewWidget from './TradingViewWidget'; // ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ component ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á

// (‡∏™‡∏°‡∏°‡∏ï‡∏¥) ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ type ‡πÅ‡∏•‡∏∞ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
import { FinancialTrackerData, ExchangeRateData, SectorPerformance } from '@/types/financial';

/**
 * ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ Alpha Vantage, CoinAPI, ‡∏Ø‡∏•‡∏Ø)
 * @returns Promise<FinancialTrackerData>
 */
async function fetchFinancialData(): Promise<FinancialTrackerData> {
    // *** NOTE: ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á, ‡∏Ñ‡∏ß‡∏£ fetch ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Alpha Vantage ‡πÅ‡∏•‡∏∞ CoinAPI ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ***
    // ‡πÄ‡∏ä‡πà‡∏ô:
    // const thbUsdData = await getForexRate('USD', 'THB');
    // const usdtUsdData = await getCryptoRate('USDT', 'USD');
    // ...
    // ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ revalidate ‡πÉ‡∏ô fetch options ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ revalidateTag

    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á
    await new Promise(resolve => setTimeout(resolve, 500)); // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î

    return {
        thbUsd: { symbol: 'USD/THB', rate: 36.52, change: -0.15, isUp: false },
        usdUsdt: { symbol: 'USD/USDT', rate: 1.0003, change: 0.0001, isUp: true },
        goldThb: { symbol: '‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ó‡πà‡∏á (‡∏ö‡∏≤‡∏ó)', rate: 41200.00, change: 250.00, isUp: true },
        bitcoinUsd: { symbol: 'BTC/USD', rate: 67890.25, change: 1250.50, isUp: true },
        sectorPerformance: [
            { sector: 'Technology', performance: '+1.25%' },
            { sector: 'Health Care', performance: '-0.45%' },
            { sector: 'Financials', performance: '+0.88%' },
            { sector: 'Energy', performance: '+2.10%' },
        ]
    };
}

// Helper Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
const RateDisplay: React.FC<{ data: ExchangeRateData }> = ({ data }) => {
    const isPositive = data.isUp;
    const colorClass = isPositive ? 'text-green-400' : 'text-red-400';
    const arrow = isPositive ? '‚ñ≤' : '‚ñº';

    const formatNumber = (num: number, decimals: number = 2) => {
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö undefined (‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
        if (num === undefined || num === null) return '-';
        return num.toLocaleString('th-TH', { minimumFractionDigits: decimals, maximumFractionDigits: decimals });
    };

    return (
        <GlassmorphismCard className="p-4 sm:p-6 flex flex-col items-start min-h-[120px] justify-center">
            <h5 className="text-sm font-light opacity-75 mb-1">{data.symbol}</h5>
            <div className="flex items-end gap-2">
                <p className="text-2xl sm:text-3xl font-bold">
                    {formatNumber(data.rate, data.symbol.includes('USDT') ? 4 : 2)}
                </p>
            </div>
            <p className={`text-md font-semibold ${colorClass} mt-1`}>
                {arrow} {formatNumber(Math.abs(data.change), data.symbol.includes('USDT') ? 4 : 2)}
            </p>
        </GlassmorphismCard>
    );
};

export default async function FinancialTracker() {
    // ‡πÉ‡∏ä‡πâ Server Component ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    let data: FinancialTrackerData;
    let hasError = false;

    try {
        data = await fetchFinancialData(); // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    } catch (error) {
        console.error("Failed to fetch financial data:", error);
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ component ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÑ‡∏î‡πâ
        data = {
            thbUsd: { symbol: 'USD/THB', rate: 0, change: 0, isUp: false },
            usdUsdt: { symbol: 'USD/USDT', rate: 0, change: 0, isUp: false },
            goldThb: { symbol: '‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ó‡πà‡∏á (‡∏ö‡∏≤‡∏ó)', rate: 0, change: 0, isUp: false },
            bitcoinUsd: { symbol: 'BTC/USD', rate: 0, change: 0, isUp: false },
            sectorPerformance: []
        };
        hasError = true;
    }


    return (
        <div className="font-sans min-h-screen p-8 mb-8 mt-8 sm:p-20 bg-gradient-to-br from-blue-980 via-blue-900 to-fuchsia-800 text-white pt-[120px] pb-[100px]">
            <GooeyBackground />

            <main className="container mx-auto max-w-7xl flex flex-col gap-12">
                <header className="text-center">
                    <h1 className="text-4xl sm:text-5xl font-extrabold tracking-tight mb-4">
                        Microtronic Financial Tracker üí∞
                    </h1>
                    <p className="text-xl sm:text-2xl font-light opacity-90 max-w-3xl mx-auto">
                        ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏•‡∏≤‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏ö‡∏ö Real-Time
                    </p>
                    {hasError && (
                        <p className="text-red-400 mt-4 text-lg">
                            ‚ö†Ô∏è ‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• API ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á
                        </p>
                    )}
                </header>

                {/* ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏•‡∏±‡∏Å */}
                <section>
                    <h3 className="text-3xl font-bold mb-6">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏´‡∏•‡∏±‡∏Å</h3>
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
                        <RateDisplay data={data.thbUsd} />
                        <RateDisplay data={data.usdUsdt} />
                        <RateDisplay data={data.goldThb} />
                        <RateDisplay data={data.bitcoinUsd} />
                    </div>
                </section>

                {/* ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á TradingView Widgets */}
                <section className="grid grid-cols-1 lg:grid-cols-2 gap-10 mt-8">
                    {/* Widget ‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÇ‡∏•‡∏Å: XAU/USD Chart */}
                    <div className="h-[400px]">
                        <TradingViewWidget
                            symbol="FX_IDC:XAUUSD" // Ticker ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÇ‡∏•‡∏Å (USD)
                            widgetType="chart"
                            title="‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÇ‡∏•‡∏Å (XAU/USD)"
                            description="‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÇ‡∏•‡∏Å‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏î‡∏≠‡∏•‡∏•‡∏≤‡∏£‡πå‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏Ø"
                            height={400}
                        />
                    </div>

                    {/* Widget ‡∏´‡∏∏‡πâ‡∏ô‡∏£‡∏≤‡∏¢ Sector: Sector Performance Hotlists */}
                    <div className="h-[400px]">
                        <TradingViewWidget
                            symbol="NYSE:SPY" // Ticker ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á Widget (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Hotlist)
                            widgetType="sector-performance"
                            title="‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏£‡∏≤‡∏¢‡∏†‡∏≤‡∏Ñ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏•‡∏≤‡∏î‡∏´‡∏∏‡πâ‡∏ô"
                            description="‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏Ñ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡πÇ‡∏•‡∏Å (TradingView Hotlist)"
                            height={400}
                        />
                    </div>
                </section>

                {/* ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏∏‡πâ‡∏ô‡∏£‡∏≤‡∏¢ Sector ‡∏à‡∏≤‡∏Å API) */}
                <section className="mt-8">
                    <h3 className="text-3xl font-bold mb-6">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏†‡∏≤‡∏Ñ‡∏™‡πà‡∏ß‡∏ô (Alpha Vantage)</h3>
                    <div className="grid grid-cols-2 sm:grid-cols-4 gap-4">
                        {data.sectorPerformance.map((item, index) => (
                            <GlassmorphismCard key={index} className="p-4 text-center">
                                <h4 className="text-lg font-semibold">{item.sector}</h4>
                                <p className={`text-xl font-bold ${item.performance.startsWith('+') ? 'text-green-400' : 'text-red-400'}`}>
                                    {item.performance}
                                </p>
                            </GlassmorphismCard>
                        ))}
                    </div>
                    <p className="mt-4 text-sm opacity-70">
                        ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Sector Performance ‡∏î‡∏∂‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å Alpha Vantage API (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ì ‡∏™‡∏¥‡πâ‡∏ô‡∏ß‡∏±‡∏ô)
                    </p>
                </section>

            </main>
        </div>
    );
}
```

-----

## 4\. ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

1. **‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå:** ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏≤‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:

      * `src/types/financial.ts`
      * `src/components/TradingViewWidget.tsx`
      * `src/components/FinancialTracker.tsx`

2. **‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Home Page (`src/app/page.tsx`):**
    ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡∏≠‡∏á `page.tsx` ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏î‡πâ‡∏ß‡∏¢ Component ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô `FinancialTracker` ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô `page.tsx` ‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö

    **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ô `page.tsx` ‡πÄ‡∏î‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢)**

    ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á `src/app/page.tsx`:

    ```tsx
    import FinancialTracker from '@/components/FinancialTracker'; // ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Component ‡πÉ‡∏´‡∏°‡πà
    ```

    ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Component ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô `main` tag ‡∏Ç‡∏≠‡∏á `page.tsx` (‡πÄ‡∏ä‡πà‡∏ô ‡πÉ‡∏ï‡πâ‡∏™‡πà‡∏ß‡∏ô `WorkShowcase`):

    ```tsx
    // ... ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á main
    <section className="w-full max-w-7xl mt-16 px-4">
        {/* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà */}
        <WorkShowcase
        title="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå"
        // ...
        works={workExamples}
        />
    </section>

    {/* **‡πÄ‡∏û‡∏¥‡πà‡∏° Financial Tracker Component ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ** */}
    <FinancialTracker /> 

    </main>
    // ...
    ```

3. **‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ API Key:**

      * ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env.local` ‡πÉ‡∏ô Root Directory ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
      * ‡πÄ‡∏û‡∏¥‡πà‡∏° API Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:
        ```env
        # .env.local
        ALPHA_VANTAGE_API_KEY=YOUR_ALPHA_VANTAGE_KEY
        COIN_API_KEY=YOUR_COIN_API_KEY
        ```
      * ‡πÉ‡∏ô `fetchFinancialData` ‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ `process.env.ALPHA_VANTAGE_API_KEY` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ API ‡∏Ñ‡∏£‡∏±‡∏ö

‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ **Server Component** (`FinancialTracker`) ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å API (‡∏à‡∏≥‡∏•‡∏≠‡∏á) ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ **Client Component** (`TradingViewWidget`) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ù‡∏±‡∏á Widget ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á Next.js App Router ‡∏Ñ‡∏£‡∏±‡∏ö\! üëç

‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏Ñ‡∏£‡∏±‡∏ö\! ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏à‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö Environment Variables ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• `FinancialTracker` Component ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∑‡∏≠ `app/asset/tools-GridCalculator/financial-tracker/page.tsx`

‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏£‡∏±‡∏ö:

-----

## 1\. ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πå Page

‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ô Next.js App Router ‡∏Ñ‡∏£‡∏±‡∏ö

### üõ†Ô∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå (`/src/app/` ‡∏´‡∏£‡∏∑‡∏≠ `/app/` ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ `src` directory)

2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö:

    ```
    app/
    ‚îî‚îÄ‚îÄ asset/
        ‚îî‚îÄ‚îÄ tools-GridCalculator/
            ‚îî‚îÄ‚îÄ financial-tracker/
                ‚îî‚îÄ‚îÄ page.tsx  <-- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ
    ```

### üìÑ ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö `app/asset/tools-GridCalculator/financial-tracker/page.tsx`

‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô **Server Component** ‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• `FinancialTracker` Component

```tsx
// app/asset/tools-GridCalculator/financial-tracker/page.tsx

import FinancialTracker from '@/components/FinancialTracker';
import { Metadata } from 'next';

// ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Metadata ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ
export const metadata: Metadata = {
    title: 'Financial Tracker - Microtronic Tools',
    description: '‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô THB/USD, USD/USDT, ‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÇ‡∏•‡∏Å, Bitcoin ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏•‡∏≤‡∏î‡πÅ‡∏ö‡∏ö Real-Time',
};

/**
 * ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏à‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á Financial Tracker
 * Component ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
 */
export default function FinancialTrackerPage() {
    return (
        // FinancialTracker Component ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Layout ‡πÅ‡∏•‡∏∞ GooeyBackground ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡πâ‡∏ß
        <FinancialTracker />
    );
}

// ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ GooeyBackground ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏¢‡πÉ‡∏ô FinancialTracker.tsx ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ
```

-----

## 2\. ‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î Environment Variables

‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env.local` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö API Key ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ **‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Server Component** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Next.js ‡∏à‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ API Key ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡πÉ‡∏ô‡∏ù‡∏±‡πà‡∏á Client (Browser)

### üõ†Ô∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô :

1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå **`.env.local`** ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Root Directory ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤)
2. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:

### üìÑ ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö `.env.local`

```env
# .env.local

# API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Alpha Vantage (‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Forex, ‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥, Bitcoin, Sector Performance)
# ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà YOUR_ALPHA_VANTAGE_KEY ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏µ‡∏¢‡πå‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
ALPHA_VANTAGE_API_KEY=YOUR_ALPHA_VANTAGE_KEY

# API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö CoinAPI.io (‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Crypto ‡πÄ‡∏ä‡πà‡∏ô USDT/USD ‡∏´‡∏£‡∏∑‡∏≠ BTC/USD)
# ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà YOUR_COIN_API_KEY ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏µ‡∏¢‡πå‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
COIN_API_KEY=YOUR_COIN_API_KEY

# ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Next.js 13+ ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
# ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏ù‡∏±‡πà‡∏á Client Component ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà NEXT_PUBLIC_ ‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤ 
# ‡πÅ‡∏ï‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API Key (‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Server Component) ‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ NEXT_PUBLIC_
```

### ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á :

* **‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏™‡πà `NEXT_PUBLIC_` ‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤ API Key** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ Key ‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡∏ï‡πà‡∏≠‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞
* **`.env.local` ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `.gitignore`** (‡πÇ‡∏î‡∏¢‡∏õ‡∏Å‡∏ï‡∏¥ Next.js Project ‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ Key ‡∏ñ‡∏π‡∏Å Commit ‡∏Ç‡∏∂‡πâ‡∏ô GitHub ‡∏´‡∏£‡∏∑‡∏≠ Vercel (Vercel ‡∏à‡∏∞‡∏°‡∏µ‡∏ß‡∏¥‡∏ò‡∏µ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Key ‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å)

-----

## 3\. ‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Keys

‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö API Key ‡∏à‡∏≤‡∏Å‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥

### üü¢ Alpha Vantage (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö THB/USD, ‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥, ‡∏´‡∏∏‡πâ‡∏ô)

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå **Alpha Vantage** ‡πÅ‡∏•‡∏∞‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
2. ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö **Free API Key** ‡∏ó‡∏≤‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏• ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å Dashboard
3. ‡∏ô‡∏≥‡∏Ñ‡∏µ‡∏¢‡πå‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏õ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà **`YOUR_ALPHA_VANTAGE_KEY`** ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `.env.local`

### üü¢ CoinAPI.io (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö USD/USDT)

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå **CoinAPI.io** ‡πÅ‡∏•‡∏∞‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Free Plan** (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Free Tier) ‡∏´‡∏£‡∏∑‡∏≠ **Paid Plan**
3. ‡∏ô‡∏≥ API Key ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÑ‡∏õ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà **`YOUR_COIN_API_KEY`** ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `.env.local`

-----

## 4\. ‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏à‡∏ï‡∏≤‡∏°‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ:**

‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `fetchFinancialData()` ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå **`src/components/FinancialTracker.tsx`** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ API ‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡πÅ‡∏ó‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ `process.env.ALPHA_VANTAGE_API_KEY` ‡πÅ‡∏•‡∏∞ `process.env.COIN_API_KEY` ‡πÉ‡∏ô Server Component ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö

‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API (Alpha Vantage Forex ‡πÅ‡∏•‡∏∞ CoinAPI Crypto) ‡πÉ‡∏ô `FinancialTracker.tsx` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ API Key ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏±‡∏ö? üòä

‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á FinancialTracker.tsx ‡πÉ‡∏´‡πâ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å Alpha Vantage ‡πÅ‡∏•‡∏∞ CoinAPI ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ API Key ‡∏à‡∏≤‡∏Å Environment Variables

```tsx
// src/components/FinancialTracker.tsx
import React from 'react';
import Link from 'next/link';
import GooeyBackground from '@/components/GooeyBackground'; // ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ component ‡∏ô‡∏µ‡πâ
import GlassmorphismCard from '@/components/GlassmorphismCard'; // ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ component ‡∏ô‡∏µ‡πâ
import TradingViewWidget from './TradingViewWidget'; // ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ component ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á

// (‡∏™‡∏°‡∏°‡∏ï‡∏¥) ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ type 
// NOTE: ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå src/types/financial.ts ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
interface ExchangeRateData {
    symbol: string; 
    rate: number;
    change: number; 
    isUp: boolean; 
}

interface SectorPerformance {
    sector: string;
    performance: string;
}

interface FinancialTrackerData {
    thbUsd: ExchangeRateData;
    usdUsdt: ExchangeRateData;
    goldThb: ExchangeRateData;
    bitcoinUsd: ExchangeRateData;
    sectorPerformance: SectorPerformance[];
}

// ----------------------------------------------------------------------
// API Configuration & Helpers
// ----------------------------------------------------------------------

// ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Revalidate Time (‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏∏‡∏Å 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
const REVALIDATE_TIME = 60; 
// Revalidate ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Sector Performance (24 ‡∏ä‡∏°. ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ì ‡∏™‡∏¥‡πâ‡∏ô‡∏ß‡∏±‡∏ô)
const SECTOR_REVALIDATE_TIME = 86400; 

// ‡∏î‡∏∂‡∏á API Key ‡∏à‡∏≤‡∏Å Environment Variables
const ALPHA_VANTAGE_KEY = process.env.ALPHA_VANTAGE_API_KEY;
const COIN_API_KEY = process.env.COIN_API_KEY;
const API_BASE_URL_AV = 'https://www.alphavantage.co/query';
const API_BASE_URL_COIN = 'https://rest.coinapi.io/v1';

// ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Fallback ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà API ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏à‡∏û‡∏±‡∏á)
const DEFAULT_DATA_FALLBACK = {
    thbUsd: { symbol: 'USD/THB', rate: 36.52, change: -0.15, isUp: false },
    usdUsdt: { symbol: 'USDT/USD', rate: 1.0003, change: 0.0001, isUp: true },
    goldThb: { symbol: '‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ó‡πà‡∏á (‡∏ö‡∏≤‡∏ó)', rate: 41200.00, change: 250.00, isUp: true },
    bitcoinUsd: { symbol: 'BTC/USD', rate: 67890.25, change: 1250.50, isUp: true },
    sectorPerformance: [
        { sector: 'Technology', performance: '+1.25%' },
        { sector: 'Health Care', performance: '-0.45%' },
    ] as SectorPerformance[]
};

// Helper: ‡πÅ‡∏õ‡∏•‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ç‡∏≠‡∏á Alpha Vantage Forex ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô ExchangeRateData
function formatAlphaVantageForex(data: any, symbol: string): ExchangeRateData {
    if (!data || !data['Realtime Currency Exchange Rate']) {
        throw new Error(`Invalid Alpha Vantage Forex data for ${symbol}`);
    }

    const rawRate = parseFloat(data['Realtime Currency Exchange Rate']['5. Exchange Rate']);
    // Alpha Vantage Free Tier ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 'change' ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á, ‡πÄ‡∏£‡∏≤‡∏à‡∏∂‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô
    const change = 0.00; 
    const isUp = true; 

    return {
        symbol: symbol,
        rate: rawRate,
        change: change,
        isUp: isUp,
    };
}

// 1. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• THB/USD (‡πÉ‡∏ä‡πâ Alpha Vantage)
async function fetchAlphaVantageData(from: string, to: string, symbol: string): Promise<ExchangeRateData> {
    if (!ALPHA_VANTAGE_KEY) throw new Error("ALPHA_VANTAGE_API_KEY is not set.");
    
    // Alpha Vantage: Realtime Currency Exchange Rate (FOREX)
    const url = `${API_BASE_URL_AV}?function=CURRENCY_EXCHANGE_RATE&from_currency=${from}&to_currency=${to}&apikey=${ALPHA_VANTAGE_KEY}`;
    
    const response = await fetch(url, { next: { revalidate: REVALIDATE_TIME } });
    if (!response.ok) {
        throw new Error(`Failed to fetch Alpha Vantage data for ${symbol}: ${response.statusText}`);
    }

    const data = await response.json();

    if (data['Error Message'] || data['Note']) {
        console.error(`Alpha Vantage Error for ${symbol}:`, data);
        throw new Error(`Alpha Vantage API Limit/Error: ${data['Note'] || data['Error Message']}`);
    }

    return formatAlphaVantageForex(data, symbol);
}

// 2. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Crypto/Stablecoin (USD/USDT, BTC/USD) (‡πÉ‡∏ä‡πâ CoinAPI)
async function fetchCoinAPICrypto(base: string, quote: string, symbol: string): Promise<ExchangeRateData> {
    if (!COIN_API_KEY) throw new Error("COIN_API_KEY is not set.");
    
    // CoinAPI: Exchange Rate
    const url = `${API_BASE_URL_COIN}/exchangerate/${base}/${quote}`;
    
    const response = await fetch(url, { 
        headers: { 'X-CoinAPI-Key': COIN_API_KEY as string }, // ‡πÉ‡∏ä‡πâ as string ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ TypeScript ‡πÑ‡∏°‡πà‡∏Å‡∏±‡∏á‡∏ß‡∏•
        next: { revalidate: REVALIDATE_TIME } 
    });

    if (!response.ok) {
        throw new Error(`Failed to fetch CoinAPI data for ${symbol}: ${response.statusText}`);
    }

    const data = await response.json();
    
    if (data.error) {
        console.error(`CoinAPI Error for ${symbol}:`, data);
        throw new Error(`CoinAPI Error: ${data.error}`);
    }

    // CoinAPI ‡πÉ‡∏´‡πâ‡πÅ‡∏Ñ‡πà 'rate' ‡πÑ‡∏°‡πà‡∏°‡∏µ 'change' ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô
    const change = 0.0000;
    const isUp = true; 

    return {
        symbol: symbol,
        rate: data.rate,
        change: change,
        isUp: isUp,
    };
}

// 3. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Sector Performance (‡πÉ‡∏ä‡πâ Alpha Vantage)
async function fetchSectorPerformance(): Promise<SectorPerformance[]> {
    if (!ALPHA_VANTAGE_KEY) return []; // ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ Key

    const url = `${API_BASE_URL_AV}?function=SECTOR&apikey=${ALPHA_VANTAGE_KEY}`;
    
    const response = await fetch(url, { next: { revalidate: SECTOR_REVALIDATE_TIME } });
    
    if (!response.ok) {
        console.error("Failed to fetch Sector Performance");
        return [];
    }
    
    const data = await response.json();

    if (data['Error Message'] || data['Note']) {
        console.error("Alpha Vantage Sector Error:", data);
        return [];
    }

    const sectorData = data['Rank A: Real Time Performance'];
    if (!sectorData) return [];
    
    const result: SectorPerformance[] = [];
    
    // ‡πÅ‡∏õ‡∏•‡∏á Object ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô Array ‡∏ó‡∏µ‡πà‡∏°‡∏µ Sector Name ‡πÅ‡∏•‡∏∞ Performance
    for (const sector in sectorData) {
        result.push({
            sector: sector.replace(/^\d+\. /, ''), // ‡∏•‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠ Sector
            performance: sectorData[sector],
        });
    }

    return result;
}


// ----------------------------------------------------------------------
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å
// ----------------------------------------------------------------------

async function fetchFinancialData(): Promise<FinancialTrackerData> {
    let hasError = false;

    try {
        const [
            thbUsdResult, 
            usdUsdtResult, 
            bitcoinUsdResult, 
            sectorPerformanceResult
        ] = await Promise.allSettled([
            // 1. THB/USD (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å USD/THB)
            fetchAlphaVantageData('USD', 'THB', 'USD/THB'), 

            // 2. USD/USDT (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å USDT/USD)
            fetchCoinAPICrypto('USDT', 'USD', 'USDT/USD'), 

            // 3. Bitcoin/USD 
            fetchCoinAPICrypto('BTC', 'USD', 'BTC/USD'),
            
            // 4. Sector Performance
            fetchSectorPerformance(),
        ]);
        
        // ‡πÉ‡∏ä‡πâ Fallback Data ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà Promise ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß (Rejected)
        const thbUsd = thbUsdResult.status === 'fulfilled' ? thbUsdResult.value : DEFAULT_DATA_FALLBACK.thbUsd;
        const usdUsdt = usdUsdtResult.status === 'fulfilled' ? usdUsdtResult.value : DEFAULT_DATA_FALLBACK.usdUsdt;
        const bitcoinUsd = bitcoinUsdResult.status === 'fulfilled' ? bitcoinUsdResult.value : DEFAULT_DATA_FALLBACK.bitcoinUsd;
        const sectorPerformance = sectorPerformanceResult.status === 'fulfilled' ? sectorPerformanceResult.value : DEFAULT_DATA_FALLBACK.sectorPerformance;

        // NOTE: ‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÑ‡∏ó‡∏¢ (THB) ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Fallback ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ API ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å XAU/USD * THB/USD
        const goldThb = DEFAULT_DATA_FALLBACK.goldThb; 

        if (thbUsdResult.status === 'rejected' || usdUsdtResult.status === 'rejected' || bitcoinUsdResult.status === 'rejected') {
            hasError = true;
        }
        
        return {
            thbUsd,
            usdUsdt,
            goldThb,
            bitcoinUsd,
            sectorPerformance,
        };
    } catch (error) {
        console.error("Critical error during primary data fetch:", error);
        hasError = true;
        return DEFAULT_DATA_FALLBACK;
    } finally {
        // ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ state 'hasError' ‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
    }
}


// ----------------------------------------------------------------------
// Component Display Logic
// ----------------------------------------------------------------------

// Helper Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
const RateDisplay: React.FC<{ data: ExchangeRateData }> = ({ data }) => {
    const isPositive = data.isUp;
    const colorClass = isPositive ? 'text-green-400' : 'text-red-400';
    const arrow = isPositive ? '‚ñ≤' : '‚ñº';

    const formatNumber = (num: number | undefined | null, decimals: number = 2) => {
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö undefined ‡∏´‡∏£‡∏∑‡∏≠ null (‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
        if (num === undefined || num === null || isNaN(num)) return '-';
        return num.toLocaleString('th-TH', { minimumFractionDigits: decimals, maximumFractionDigits: decimals });
    };

    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô
    const decimalCount = data.symbol.includes('USDT') || data.symbol.includes('BTC') ? 4 : 2;

    return (
        <GlassmorphismCard className="p-4 sm:p-6 flex flex-col items-start min-h-[120px] justify-center">
            <h5 className="text-sm font-light opacity-75 mb-1">{data.symbol}</h5>
            <div className="flex items-end gap-2">
                <p className="text-2xl sm:text-3xl font-bold">
                    {formatNumber(data.rate, decimalCount)}
                </p>
            </div>
            <p className={`text-md font-semibold ${colorClass} mt-1`}>
                {arrow} {formatNumber(Math.abs(data.change), decimalCount)}
            </p>
        </GlassmorphismCard>
    );
};

export default async function FinancialTracker() {
    
    const data = await fetchFinancialData(); // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• API ‡πÉ‡∏ô Server Component
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Fallback ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏ñ‡πâ‡∏≤‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)
    const usingFallback = data.thbUsd.rate === DEFAULT_DATA_FALLBACK.thbUsd.rate && data.thbUsd.change === DEFAULT_DATA_FALLBACK.thbUsd.change;
    
    return (
        <div className="font-sans min-h-screen p-8 mb-8 mt-8 sm:p-20 bg-gradient-to-br from-blue-980 via-blue-900 to-fuchsia-800 text-white pt-[120px] pb-[100px]">
            <GooeyBackground />

            <main className="container mx-auto max-w-7xl flex flex-col gap-12">
                <header className="text-center">
                    <h1 className="text-4xl sm:text-5xl font-extrabold tracking-tight mb-4">
                        Microtronic Financial Tracker üí∞
                    </h1>
                    <p className="text-xl sm:text-2xl font-light opacity-90 max-w-3xl mx-auto">
                        ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏•‡∏≤‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏ö‡∏ö Real-Time
                    </p>
                    {usingFallback && (
                        <p className="text-red-400 mt-4 text-lg">
                            ‚ö†Ô∏è ‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• API ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏´‡∏£‡∏∑‡∏≠ API Key ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á
                        </p>
                    )}
                </header>

                {/* ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏•‡∏±‡∏Å */}
                <section>
                    <h3 className="text-3xl font-bold mb-6">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏´‡∏•‡∏±‡∏Å</h3>
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
                        <RateDisplay data={data.thbUsd} />
                        <RateDisplay data={data.usdUsdt} />
                        <RateDisplay data={data.goldThb} />
                        <RateDisplay data={data.bitcoinUsd} />
                    </div>
                </section>

                {/* ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á TradingView Widgets */}
                <section className="grid grid-cols-1 lg:grid-cols-2 gap-10 mt-8">
                    {/* Widget ‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÇ‡∏•‡∏Å: XAU/USD Chart */}
                    <div className="h-[400px]">
                        <TradingViewWidget
                            symbol="FX_IDC:XAUUSD" // Ticker ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÇ‡∏•‡∏Å (USD)
                            widgetType="chart"
                            title="‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÇ‡∏•‡∏Å (XAU/USD)"
                            description="‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÇ‡∏•‡∏Å‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏î‡∏≠‡∏•‡∏•‡∏≤‡∏£‡πå‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏Ø"
                            height={400}
                        />
                    </div>

                    {/* Widget ‡∏´‡∏∏‡πâ‡∏ô‡∏£‡∏≤‡∏¢ Sector: Sector Performance Hotlists */}
                    <div className="h-[400px]">
                        <TradingViewWidget
                            symbol="NYSE:SPY" // Ticker ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á Widget (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Hotlist)
                            widgetType="sector-performance"
                            title="‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏£‡∏≤‡∏¢‡∏†‡∏≤‡∏Ñ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏•‡∏≤‡∏î‡∏´‡∏∏‡πâ‡∏ô"
                            description="‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏Ñ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏∏‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡πÇ‡∏•‡∏Å (TradingView Hotlist)"
                            height={400}
                        />
                    </div>
                </section>

                {/* ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏∏‡πâ‡∏ô‡∏£‡∏≤‡∏¢ Sector ‡∏à‡∏≤‡∏Å API) */}
                <section className="mt-8">
                    <h3 className="text-3xl font-bold mb-6">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏†‡∏≤‡∏Ñ‡∏™‡πà‡∏ß‡∏ô (Alpha Vantage)</h3>
                    <div className="grid grid-cols-2 sm:grid-cols-4 gap-4">
                        {data.sectorPerformance.map((item, index) => (
                            <GlassmorphismCard key={index} className="p-4 text-center">
                                <h4 className="text-lg font-semibold">{item.sector}</h4>
                                <p className={`text-xl font-bold ${item.performance.startsWith('+') ? 'text-green-400' : 'text-red-400'}`}>
                                    {item.performance}
                                </p>
                            </GlassmorphismCard>
                        ))}
                    </div>
                    <p className="mt-4 text-sm opacity-70">
                        ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Sector Performance ‡∏î‡∏∂‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å Alpha Vantage API (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ì ‡∏™‡∏¥‡πâ‡∏ô‡∏ß‡∏±‡∏ô)
                    </p>
                </section>

            </main>
        </div>
    );
}
```
